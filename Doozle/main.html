<html>
    
    <head>
        <title>Doozle</title>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1">
                
                <style type="text/css">
                    * {
                        margin: 0;
                        padding: 0;
                    }
                
                body {
                    background: transparent;
                }
                </style>
    </head>
    
    <body>
        <canvas id="canvas"></canvas>
        <script type="text/javascript">
            var LINE_COLOR = "green"
            var LINE_WIDTH = 4
            
            var canvas = document.getElementById("canvas")
            var ctx = canvas.getContext("2d")
            
            window.addEventListener("load", init)
            window.addEventListener("resize", resize)
            
            function init() {
                var painting = false
                var lastX = 0
                var lastY = 0
                
                resize()
                
                canvas.addEventListener('mousedown', paint)
                canvas.addEventListener('mousemove', draw)
                canvas.addEventListener('mouseup', reset)
                canvas.addEventListener('mouseout', reset)
                
                function paint(event) {
                    painting = true
                    lastX = event.pageX - this.offsetLeft
                    lastY = event.pageY - this.offsetTop
                }
                
                function draw(event) {
                    if (!painting) return
                    
                    mouseX = event.pageX - this.offsetLeft
                    mouseY = event.pageY - this.offsetTop
                    
                    ctx.beginPath()
                    ctx.moveTo(lastX, lastY)
                    ctx.lineTo(mouseX, mouseY)
                    ctx.lineWidth = LINE_WIDTH
                    ctx.lineJoin = "round"
                    ctx.lineCap = "round"
                    ctx.strokeStyle = LINE_COLOR
                    ctx.stroke()
                    
                    lastX = mouseX
                    lastY = mouseY
                }
                
                function reset(event) {
                    painting = false
                    setTimeout(() => {
                               if (painting) return
                               ctx.clearRect(0, 0, canvas.width, canvas.height)
                               }, 1000)
                }
            }
        
        function resize() {
            canvas.width = window.innerWidth
            canvas.height = window.innerHeight
            
            if (window.devicePixelRatio > 1) {
                var canvasWidth = canvas.width;
                var canvasHeight = canvas.height;
                
                canvas.width = canvasWidth * window.devicePixelRatio;
                canvas.height = canvasHeight * window.devicePixelRatio;
                canvas.style.width = canvasWidth;
                canvas.style.height = canvasHeight;
                
                ctx.scale(window.devicePixelRatio, window.devicePixelRatio);
            }
        }
        </script>
    </body>
    
</html>
